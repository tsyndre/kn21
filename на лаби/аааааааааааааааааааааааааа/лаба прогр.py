class Маршрут:
    def __init__(self, старт, фініш, довжини_переходів):
        self.старт = старт
        self.фініш = фініш
        self.довжини_переходів = довжини_переходів

    def __str__(self):
        return f"Маршрут: {self.старт} -> {self.фініш}, довжина: {self.отримати_довжину()} км, кількість привалів: {self.отримати_кількість_привалів()}"

    def отримати_довжину(self):
        return sum(self.довжини_переходів)

    def отримати_кількість_привалів(self):
        return len(self.довжини_переходів) - 1

    def найдовший_перехід(self):
        return max(self.довжини_переходів)

    def __lt__(self, інший):
        return self.отримати_довжину() < інший.отримати_довжину()

    def __eq__(self, інший):
        return self.отримати_довжину() == інший.отримати_довжину()


def зчитати_маршрути_з_файлу(імя_файлу):
    маршрути = []
    with open(імя_файлу, 'r', encoding='utf-8') as файл:
        for рядок in файл:
            дані = рядок.strip().split(', ')
            старт = дані[0]
            фініш = дані[1]
            довжини_переходів = list(map(int, дані[2:]))
            маршрути.append(Маршрут(старт, фініш, довжини_переходів))
    return маршрути


def маршрути_з_максимальною_кількістю_привалів(маршрути):
    макс_кількість = max(маршрут.отримати_кількість_привалів() for маршрут in маршрути)
    return [маршрут for маршрут in маршрути if маршрут.отримати_кількість_привалів() == макс_кількість]

def маршрут_з_найдовшим_переходом(маршрути):
    return max(маршрути, key=lambda маршрут: маршрут.найдовший_перехід())

def маршрути_з_точкою(маршрути, точка, як_старт=True):
    if як_старт:
        return [маршрут for маршрут in маршрути if маршрут.старт == точка]
    else:
        return [маршрут for маршрут in маршрути if маршрут.фініш == точка]


if __name__ == "__main__":
    імя_файлу = "маршрути.txt"

    try:
        маршрути = зчитати_маршрути_з_файлу(імя_файлу)
        маршрути.sort()

        print("Всі маршрути (кароч по довжині):")
        for маршрут in маршрути:
            print(маршрут)

        print("\nМаршрути з максимальною кількістю привалів:")
        for маршрут in маршрути_з_максимальною_кількістю_привалів(маршрути):
            print(маршрут)

        print("\nМаршрут із найдовшим переходом:")
        print(маршрут_з_найдовшим_переходом(маршрути))

        точка = "Кваси"
        print(f"\nМаршрути з початком у точці {точка}:")
        for маршрут in маршрути_з_точкою(маршрути, точка, як_старт=True):
            print(маршрут)

        print(f"\nМаршрути з кінцем у точці {точка}:")
        for маршрут in маршрути_з_точкою(маршрути, точка, як_старт=False):
            print(маршрут)

    except FileNotFoundError:
        print(f"Файл {імя_файлу} не знайдено. Перевірте, чи він існує в директорії.")
    except Exception as e:
        print(f"Сталася помилка: {e}")
#кароч імя файлу це автоматично маршрути.txt не зважайте 
#я надіюсь вам підійде бо в мене згоріло трохи поки це писав навіть до гпт звертався для корекції
